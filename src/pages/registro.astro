
---

---


  <section>
<form id="form">
  <label class="titulo">Usuario: 
    <input  class="caja" ="usuarioNombre" autocomplete="none" required />
</label>
<br />
  <label class="titulo" >Clave:
     <input class="caja" name="clave" type="password" autocomplete="current-password" required />
    </label><br />
  <label class="titulo">Rol:
    <select name="rol" class="caja">
      <option value="admin">Admin</option>
      <option value="docente">Docente</option>
    </select>
  </label><br />
  <label class="titulo" >Correo: <input  class="caja" name="correo" type="email" required /></label><br />
  <button type="submit" class="boton">Registrar</button>
</form>

<p id="mensaje"></p>
</section>


<script type="module">
    const form = document.querySelector("#form");
    const mensaje = document.querySelector("#mensaje");
  
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
  
      const data = Object.fromEntries(new FormData(form));
      data.action = "registrarUsuario";
  
      try {
        const res = await fetch("/api/proxy", {
          method: "POST",
          body: JSON.stringify(data),
        });
  
        const text = await res.text();
  
        try {
          const json = JSON.parse(text);
          mensaje.textContent = json.ok ? json.mensaje : json.error || "Error desconocido";
        } catch (error) {
          mensaje.textContent = "Respuesta no es JSON. Ver consola.";
          console.error("Contenido recibido:", text);
        }
      } catch (error) {
        mensaje.textContent = "Error al enviar datos: " + error.message;
        console.error(error);
      }
    });
  </script>
  <style>
    .caja{
      background-color:cadetblue;
      margin: 5px;
      padding: 5px;
      border-color: gray;
      border-radius: 4px;
      border: none;
    }
    .titulo{
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      font-size: small;
      font-variant: small-caps;
      color: blue;     
    }

    .boton{
      margin: 5px;
      padding: 10px;
      background-color: orange;
      color: black;
      border: none;
      border-radius: 4px;      
    }
  </style>
  
